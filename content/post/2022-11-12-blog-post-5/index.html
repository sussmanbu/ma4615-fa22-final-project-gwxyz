---
title: "Blog Post 5"
author: "GWXYZ"
date: '2022-11-12'
slug: []
categories: []
tags: []
description: Research topic and combined data
toc: yes
authors: []
series: []
lastmod: '2022-11-12T21:57:22-05:00'
featuredVideo: ~
featuredImage: ~
---


<div id="TOC">

</div>

<div id="combining-data" class="section level2">
<h2>Combining Data</h2>
<p>The dataset we are combining with injury data of season 2014-2015, 2015-2016, 2016-2017 in order to predict the final result of 2017-2018 season. We use the injury data in order to get a better understanding of the team line-up in every play and also the effect of injuries on the chance of winning. We also combine with the salary cap in order to understand the relationship between the wealth of a team and its chance of winning.</p>
<p>In order to combine the datasets, we need to further clean our original datasets. To combine the injury data with our original data, we have to change the data of injury time period into year, and combine the datasets by year and player name. Then we need to clean the data by grouping them by team for every year and find the average data for every team, so we can combine the playoffs data with it. Finally, we can filter the data from the three seasons 2014-2015, 2015-2016, 2016-2017 and do further research.</p>
</div>
<div id="cleaning-data" class="section level2">
<h2>Cleaning Data</h2>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.1      ✔ stringr 1.4.1 
## ✔ readr   2.1.2      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(rvest)</code></pre>
<pre><code>## 
## 载入程辑包：&#39;rvest&#39;
## 
## The following object is masked from &#39;package:readr&#39;:
## 
##     guess_encoding</code></pre>
<pre class="r"><code>nba_clean &lt;- read_csv(&quot;/Users/xuduoyifu/Desktop/大四/MA415/HW/ma4615-fa22-final-project-gwxyz/dataset/nba_clean.csv&quot;)</code></pre>
<pre><code>## Rows: 24626 Columns: 49
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (4): PlayerName, Pos, Tm, FTr
## dbl (45): #, SeasonStart, PlayerSalary, Age, G, GS, MP, PER, TS%, 3PAr, ORB%...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>playoffs &lt;- nba_clean%&gt;%
  filter(SeasonStart%in%c(&quot;2014&quot;,&quot;2015&quot;,&quot;2016&quot;))%&gt;%
  filter(Tm%in%c(&quot;IND&quot;,&quot;MIA&quot;, &quot;TOT&quot;, &quot;CHA&quot;, &quot;WAS&quot;, &quot;BRK&quot;,&quot;CHI&quot;, &quot;ATL&quot;,&quot;SAS&quot;,&quot;OKC&quot;,&quot;LAC&quot;,&quot;HOU&quot;,&quot;POR&quot;,&quot;GSW&quot;,&quot;MEM&quot;,&quot;DAL&quot;,
                 &quot;NOP&quot;, &quot;CLE&quot;, &quot;TOR&quot;, &quot;BOS&quot;, &quot;MIL&quot;,
                 &quot;DET&quot;))

Illness &lt;- read_html(&quot;https://hashtagbasketball.com/injury/illness&quot;)
(Illness_node &lt;- Illness %&gt;% html_node(&quot;.col-md-12&quot;))</code></pre>
<pre><code>## {html_node}
## &lt;div class=&quot;col-md-12&quot;&gt;
## [1] &lt;div class=&quot;table-responsive&quot;&gt;\n&lt;div&gt;\n&lt;table class=&quot;table table-sm table ...</code></pre>
<pre class="r"><code>Illness_table &lt;- Illness_node %&gt;% html_table() %&gt;% select(-(RETURNED))
colnames(Illness_table)[colnames(Illness_table) %in% c(&#39;INJURED ON&#39;,&#39;DAYS MISSED&#39;)] &lt;- c(&#39;Illness_year&#39;,&#39;Illess_days_missed&#39;)
Illness_table$Illness_year &lt;- substr(Illness_table$Illness_year,nchar(Illness_table$Illness_year)-3,nchar(Illness_table$Illness_year))
Illness_table %&gt;% mutate(across(starts_with(&quot;Illness&quot;),
                                ~ as.numeric(as.character(.))))</code></pre>
<pre><code>## Warning in mask$eval_all_mutate(quo): 强制改变过程中产生了NA</code></pre>
<pre><code>## # A tibble: 429 × 4
##    PLAYER           TEAM      Illness_year Illess_days_missed
##    &lt;chr&gt;            &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;             
##  1 Jeremy Sochan    Spurs             2022 3                 
##  2 Paul George      Clippers          2022 2                 
##  3 Serge Ibaka      Bucks             2022 1                 
##  4 Luca Vildoza     Bucks             2022 2                 
##  5 Frank Ntilikina  Mavericks         2022 15                
##  6 Donovan Mitchell Jazz              2022 6                 
##  7 Serge Ibaka      Bucks             2022 6                 
##  8 Paul Millsap     76ers             2022 5                 
##  9 Dejounte Murray  Spurs             2022 9                 
## 10 Marquese Chriss  Mavericks         2022 2                 
## # … with 419 more rows</code></pre>
</div>
